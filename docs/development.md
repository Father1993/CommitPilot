# Руководство для разработчиков CommitPilot

Этот документ предназначен для разработчиков, желающих улучшить или расширить функциональность CommitPilot.

## Структура проекта

```
CommitPilot/
├── auto_commit.py       # Основной скрипт
├── openai_support.py    # Модуль для работы с OpenAI API
├── prepare-commit-msg   # Git hook
├── install.sh           # Установочный скрипт
├── config.ini           # Конфигурационный файл
├── .gitignore           # Файл игнорирования Git
└── docs/                # Документация
    ├── installation.md  # Руководство по установке
    ├── how_it_works.md  # Принцип работы
    ├── examples.md      # Примеры использования
    └── development.md   # Руководство для разработчиков
```

## Архитектура

CommitPilot использует модульную архитектуру:

1. **Ядро** (`auto_commit.py`) - основной скрипт, обрабатывающий аргументы командной строки и управляющий процессом
2. **AI Провайдеры** - модули для работы с разными API (сейчас Hugging Face и OpenAI)
3. **Git интеграция** - функции для работы с git командами
4. **Конфигурация** - управление настройками через файл config.ini

## Добавление нового AI провайдера

Чтобы добавить поддержку нового AI провайдера:

1. Создайте новый модуль (например, `anthropic_support.py`)
2. Реализуйте функцию `generate_commit_message_with_<provider>` по аналогии с существующими
3. Добавьте импорт и обработку нового провайдера в `auto_commit.py`
4. Обновите константы в `auto_commit.py` для включения нового провайдера в список доступных

## Стиль кода

Придерживайтесь следующих стандартов:

-   PEP 8 для стиля кода Python
-   Документируйте функции в формате docstring
-   Используйте типизацию (typing)
-   Обрабатывайте исключения
-   Используйте логирование вместо print

## Тестирование

Перед отправкой PR проверьте:

1. Работоспособность основных команд
2. Корректную обработку ошибок
3. Обратную совместимость
4. Работу в различных окружениях (Windows, Linux, macOS)
5. Работу при использовании в других проектах

## Конфигурация и безопасность

При разработке обратите внимание на:

1. Правильное использование API ключей из config.ini
2. Обработку случаев, когда ключи отсутствуют
3. Защиту API ключей (config.ini добавлен в .gitignore)
4. Обработку ошибок API и сетевых проблем

## Релизы

При создании нового релиза:

1. Обновите версию в константе VERSION
2. Обновите CHANGELOG.md
3. Обновите документацию при необходимости
4. Создайте тег для релиза

## Возможные улучшения

Идеи для будущих улучшений:

1. Добавление новых AI провайдеров (Claude, Gemini)
2. Поддержка локальных моделей через Ollama
3. Создание плагинов для популярных IDE
4. Улучшение определения области (scope) коммитов
5. Многоязычная поддержка для сообщений коммитов

## Лицензия

Весь код должен соответствовать лицензии MIT.
